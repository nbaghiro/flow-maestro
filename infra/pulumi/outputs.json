{
    "outputs": {
        "appDatabaseConnectionString": "[secret]",
        "appDatabaseName": "flowmaestro",
        "appDatabaseUser": "flowmaestro",
        "artifactsBucketName": "flowmaestro-artifacts-flowmaestro-prod",
        "artifactsBucketUrl": "gs://flowmaestro-artifacts-flowmaestro-prod",
        "clusterCaCertificate": "[secret]",
        "clusterEndpoint": "136.113.117.157",
        "clusterName": "flowmaestro-cluster",
        "dashboardId": "projects/409190486908/dashboards/d496c045-147a-43d7-8818-1e19318ae4e3",
        "databaseConnectionName": "flowmaestro-prod:us-central1:flowmaestro-db",
        "databaseInstanceName": "flowmaestro-db",
        "databasePrivateIp": "10.157.1.2",
        "domain": "flowmaestro.ai",
        "environment": "production",
        "kubeconfig": "[secret]",
        "networkName": "flowmaestro-network",
        "nextSteps": "\nFlowMaestro Infrastructure Deployed Successfully! ðŸŽ‰\n\nNext Steps:\n===========\n\n1. Configure kubectl:\n   $ pulumi stack output kubeconfig > kubeconfig.yaml\n   $ export KUBECONFIG=./kubeconfig.yaml\n   $ kubectl get nodes\n\n2. Configure DNS records for your domain (flowmaestro.ai):\n   Create A records pointing to: 34.8.178.55\n   - api.flowmaestro.ai\n   - app.flowmaestro.ai\n   - www.flowmaestro.ai\n\n3. Build and push Docker images:\n   $ export IMAGE_TAG=$(git rev-parse --short HEAD)\n   $ export REGISTRY=\"us-central1-docker.pkg.dev/flowmaestro-prod/flowmaestro\"\n\n   # Create Artifact Registry repository\n   $ gcloud artifacts repositories create flowmaestro \\\n       --repository-format=docker \\\n       --location=us-central1\n\n   # Authenticate Docker\n   $ gcloud auth configure-docker us-central1-docker.pkg.dev\n\n   # Build and push images\n   $ docker build -f infra/docker/backend/Dockerfile -t $REGISTRY/backend:$IMAGE_TAG .\n   $ docker push $REGISTRY/backend:$IMAGE_TAG\n\n   $ docker build -f infra/docker/frontend/Dockerfile \\\n       --build-arg VITE_API_URL=https://api.flowmaestro.ai \\\n       --build-arg VITE_WS_URL=wss://api.flowmaestro.ai \\\n       -t $REGISTRY/frontend:$IMAGE_TAG .\n   $ docker push $REGISTRY/frontend:$IMAGE_TAG\n\n   $ docker build -f infra/docker/marketing/Dockerfile -t $REGISTRY/marketing:$IMAGE_TAG .\n   $ docker push $REGISTRY/marketing:$IMAGE_TAG\n\n4. Create Kubernetes secrets:\n   $ kubectl create namespace flowmaestro\n\n   # Application database credentials\n   $ kubectl create secret generic db-credentials \\\n       --namespace=flowmaestro \\\n       --from-literal=host=10.157.1.2 \\\n       --from-literal=port=5432 \\\n       --from-literal=database=flowmaestro \\\n       --from-literal=user=flowmaestro \\\n       --from-literal=password='<from-pulumi-config-dbPassword>'\n\n   # Temporal database credentials\n   $ kubectl create secret generic temporal-db-credentials \\\n       --namespace=flowmaestro \\\n       --from-literal=host=10.157.1.2 \\\n       --from-literal=port=5432 \\\n       --from-literal=database=temporal \\\n       --from-literal=visibility-database=temporal_visibility \\\n       --from-literal=user=temporal \\\n       --from-literal=password='<from-pulumi-config-dbPassword>'\n\n   # Redis credentials\n   $ kubectl create secret generic redis-credentials \\\n       --namespace=flowmaestro \\\n       --from-literal=host=10.157.0.4 \\\n       --from-literal=port=6379\n\n   # Application secrets\n   $ kubectl create secret generic app-secrets \\\n       --namespace=flowmaestro \\\n       --from-literal=jwt-secret='<from-pulumi-config-jwtSecret>' \\\n       --from-literal=encryption-key='<from-pulumi-config-encryptionKey>'\n\n   # Integration secrets (from appSecrets config)\n   $ kubectl create secret generic integration-secrets \\\n       --namespace=flowmaestro \\\n       --from-literal=OPENAI_API_KEY='<from-config>' \\\n       --from-literal=ANTHROPIC_API_KEY='<from-config>' \\\n       --from-literal=GOOGLE_API_KEY='<from-config>'\n\n5. Deploy Temporal server:\n   $ kubectl apply -f infra/k8s/jobs/temporal-schema-migration.yaml\n   $ kubectl wait --for=condition=complete job/temporal-schema-migration -n flowmaestro --timeout=5m\n   $ kubectl apply -f infra/k8s/base/temporal-deployment.yaml\n\n6. Deploy application:\n   $ kubectl apply -f infra/k8s/jobs/db-migration.yaml\n   $ kubectl wait --for=condition=complete job/db-migration -n flowmaestro --timeout=5m\n   $ kubectl apply -k infra/k8s/overlays/production\n\n   # Deploy analytics aggregation CronJobs\n   $ kubectl apply -f infra/k8s/jobs/analytics-aggregation.yaml\n\n7. Wait for SSL certificate (15-60 minutes):\n   $ kubectl describe managedcertificate flowmaestro-cert -n flowmaestro\n\n8. Verify deployment:\n   $ kubectl get pods -n flowmaestro\n   $ kubectl get ingress -n flowmaestro\n   $ kubectl get hpa -n flowmaestro\n\n9. Access your application:\n   - API: https://api.flowmaestro.ai\n   - Frontend: https://app.flowmaestro.ai\n   - Marketing: https://www.flowmaestro.ai\n   - Monitoring: https://console.cloud.google.com/monitoring/dashboards/custom/projects/409190486908/dashboards/d496c045-147a-43d7-8818-1e19318ae4e3\n\nConnection Info:\n================\nApplication Database:\n  Host: 10.157.1.2\n  Port: 5432\n  Database: flowmaestro\n  User: flowmaestro\n\nTemporal Databases:\n  Host: 10.157.1.2\n  Port: 5432\n  Main: temporal\n  Visibility: temporal_visibility\n  User: temporal\n\nRedis:\n  Host: 10.157.0.4\n  Port: 6379\n\nLoad Balancer IP: 34.8.178.55\n",
        "project": "flowmaestro-prod",
        "redisHost": "10.157.0.4",
        "redisPort": 6379,
        "redisReadEndpoint": "",
        "region": "us-central1",
        "serviceAccountEmail": "flowmaestro-k8s-sa@flowmaestro-prod.iam.gserviceaccount.com",
        "staticIpAddress": "34.8.178.55",
        "subnetName": "flowmaestro-subnet",
        "temporalDatabaseConnectionString": "[secret]",
        "temporalDatabaseName": "temporal",
        "temporalDatabaseUser": "temporal",
        "temporalNamespace": "default",
        "temporalVisibilityDatabaseConnectionString": "[secret]",
        "temporalVisibilityDatabaseName": "temporal_visibility",
        "uploadsBucketName": "flowmaestro-uploads-flowmaestro-prod",
        "uploadsBucketUrl": "gs://flowmaestro-uploads-flowmaestro-prod"
    }
}
